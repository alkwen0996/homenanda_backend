<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.home.nanda.board.model.mapper.CommunityMapper">

    <resultMap type="Article" id="CommunityMap">
        <result column="article_id" property="articleId"/>
        <result column="user_id" property="userId"/>
        <result column="subject" property="subject"/>
        <result column="content" property="content"/>
        <result column="created_date" property="createdDate"/>
        <result column="updated_date" property="updatedDate"/>
        <result column="hit" property="hit"/>
        <result column="notice_yn" property="noticeYN"/>
    </resultMap>

    <select id="searchAllArticles" resultMap="CommunityMap">
        select article_id, user_id, subject, content, created_date, updated_date, hit, notice_yn
        from community_board
    </select>

    <select id="searchArticleById" parameterType="String" resultMap="CommunityMap">
        select article_id, user_id, subject, content, created_date, updated_date, hit, notice_yn
        from community_board
        where article_id = #{articleId}
    </select>

    <insert id="registerArticle" parameterType="Article">
        insert into community_board (user_id,article_id,subject,content,created_date, notice_yn) values (#{userId},#{articleId}, #{subject}, #{content}, now(), #{noticeYN})
    </insert>

    <update id="updateHit" parameterType="String">
        update community_board
        set hit = hit + 1
        where article_id = #{articleId}
    </update>

</mapper>
